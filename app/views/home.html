<div class="view-page">
  <div top-menu class="row">
  </div>
  <div class="container-fluid">
  	 <div class="row">
  	 	<div id="search" class="col-md-6 col-md-offset-3" style="text-align: center;" >
	  	 	<h1>Les centres de recherches en Sciences Politiques en France</h1>
	    	<p >
	    		Une étude menée par la bibliothèque de Sciences Po Paris
	    	</p>
	    </div>

    </div>
  	<hr/>

  	<!-- Search bar -->
    <div class="row">
    	<div id="search" class="col-md-6 col-md-offset-2" >
	    	<input type="text" placeholder="Entrez votre recherche ..." ng-model="filterSearch"  typeahead="word for word in allWords | filter:$viewValue:startsWith | limitTo:8">
	    	<button class="btn btn-success btn-lg" type="submit" ng-click="showNameChanged()">Rechercher</button>
	    	<button class="btn btn-success btn-lg" type="submit" ng-click="resetFilter()">Annuler</button>
    	</div>
    	<div class="col-md-4" style="float:left;">
    		<h3>Nombre de centres trouvés : {{allCenters.length}}</h3>
    	</div>
    </div>
    <hr>

    <div id="listAndMap" class="row">

    	<!-- Centers list -->
	    <div id="listCenters" class="col-md-6 centersList" >
	    	<div id="{{$index}}" class="centers" ng-repeat="(key, value) in allCenters track by $index" ng-click="displayCenter(key, value)" ng-class="{selected : key === idSelectedCenter}">
	    		<h4>{{value.center.administration['Intitulé']}}</h4>
	    		<p>{{value.center.administration['Ville']}}</p>
	    		<p>{{value.center.administration['Adresse(s)']}}</p>
	    		<div ng-show="value.search" >
		        	<ul ng-repeat="item in value.search">
		        		<li>{{item.tab}} > {{item.prop}}</li>
		        	</ul>
	    		</div>
	    		</br>
	    	</div>
	    </div>

	    <!-- Map directive -->
	    <div class="col-md-6">
	      	<leaflet 
		      	lf-center="center" 
		      	markers="markers"
		      	layers="layers"
		      	event-broadcast="events"
		      	width="100%" 
		      	height="600px">
	      	</leaflet>
	    </div>
    </div>

    <!-- Navigation in list -->
    <div id="centerNavigation" class="row">
    <div class="col-md-4">
    	
	    <button id="precedentCenter" type="button" class="btn btn-primary" ng-model="precedentCenter" ng-click="goPrecedentCenter(precedentCenter)"> < {{precedentCenter.center.administration['Intitulé']}}</button>
    </div>

	    <h3 class="col-md-4" style="text-align:center;">
	    	{{currentCenter}}
	    </h3>
	 <div class="col-md-4">
	 	
	    <button id="nextCenter" type="button" class="btn btn-primary" ng-model="nextCenter" ng-click="goNextCenter(nextCenter)">{{nextCenter.center.administration['Intitulé']}} > </button>
	 </div>
    </div>

    <!-- Center selected details -->
    <div id="centerDetails" class="row" ng-show="centerActive">
		<!-- <div style="float:right" >
			<button class="btn btn-success btn-lg" type="submit" ng-click="centerDesactivate()">Fermer la fiche du centre</button>
		</div> -->
		<tabs>
		    <pane title="Administration" class="tabsContent">
		        <div>
			      	<p>{{administration['CNRS']}}</p>
		    		<p>Année de création : {{administration['Année de création']}}</p>
		    		<p>Historique : {{administration['Historique']}}</p>
		        </div>
		    </pane>
		    <pane title="Personnel" class="tabsContent">
		        <div>
		    		<p>Effectif total : {{ personnel['Effectif total'] }}</p>
		    		<p>Personnels non permanents : {{ personnel['Personnels non permanents'] }}</p>
		    		<p>Personnels permanents : {{ personnel['Personnels permanents'] }}</p>
		    		<p>Lien vers la page "personnel" du site Web du CNRS : <a ng-href="{{ personnel['Lien vers la page \"personnel\" du site Web du CNRS'] }}">Lien</a></p>
		    		<p>Lien vers la page "personnel" sur le site Web du centre : <a ng-href="{{ personnel['Lien vers la page \"personnel\" sur le site Web du centre'] }}">{{ personnel['Lien vers la page \"personnel\" sur le site Web du centre'] }}</a></p>
		        </div>
		    </pane>
		    <pane title="Ecoles doctorales" class="tabsContent">
		        <div>
		      		<p>Directeur école doctorale : {{ ecole['Directeur de l\'Ecole Doctorale'] }}</p>
		      		<p>Courriel de l'Ecole doctorale : {{ ecole['Courriel de l\'Ecole doctorale'] }}</p>
		      		<p>Intitulé (centre ou unité de recherche) : {{ ecole['Intitulé (centre ou unité de recherche)'] }}</p>
		      		<p>Intitulé Ecole Doctorale : {{ ecole['Intitulé Ecole Doctorale'] }}</p>
		      		<p>Nombre de doctorants : {{ ecole['Nombre de doctorants'] }}</p>
		      		<p>Nombre de doctorants en science politique : {{ ecole['Nombre de doctorants en science politique'] }}</p>
		      		<p>Nombre de thèses soutenues en 2015 : {{ ecole['Nombre de thèses soutenues en 2015'] }}</p>
		      		<p>Numéro d'Ecole Doctorale : {{ ecole['Numéro d\'Ecole Doctorale']}}</p>
		        </div>
		    </pane>
		    <pane title="Thématiques de recherche" class="tabsContent ">
		        <div class="row">
			        <div class="col-md-6 colTab" >

			        	<h1 class="titleProps">Axes de recherche</h1>

			        		<div ng-bind-html="highlight(axes, filterSearch)" class="recherche">
			        		</div>

			        	<h1 class="titleProps">Collaborations / réseaux</h1>
			        		<div ng-bind-html="highlight(collaboration, filterSearch)" class="recherche">
			        		</div>


			        	<h1 class="titleProps">Contrats de recherche</h1>

			        		<div ng-bind-html="highlight(contrats, filterSearch)" class="recherche">
			        		</div>

			        	<h1 class="titleProps">Evaluations</h1>
			        		{{ recherche['Evaluations'] }}

			        	<h1 class="titleProps">Séminaires de recherche</h1>
				        	<div ng-bind-html="highlight(seminaires, filterSearch)" class="recherche">
				        	</div>
			        	
			        </div>
			        <div class="col-md-6 colTab" >
				        <h1 class="titleProps">Sections CNRS</h1>
				        	<ul ng-repeat="item in section">
				        		<li>{{item}}</li>
				        	</ul>

				        <h1 class="titleProps">Annuaire du MENESR</h1>

				        <h2 class="disciplinePrincipale"> {{ recherche['Discipline principale selon l\'annuaire du MENESR'] }}</h2>

			        	<h2 class="disciplineSecondaire"> {{ recherche['Disciplines secondaires selon l\'annuaire du MENESR'] }}</h2>

			        	<h2 class="recherche">Mots-clefs</h2>
			        	<div class="recherche">
			        		{{recherche['Mots-clés sujet selon l\'annuaire du MENESR']}}
			        	</div>
			        	
			  
			        	
			        </div>
		        </div>
		    </pane>
		  </tabs>
  	</div>
  </div>
</div>